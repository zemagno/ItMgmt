http://www.libertarianismo.org/index.php/artigos/introducao-teoria-monetaria-austriaca/

"Aberto",      0 ,"ABERTO", now(), now());
"Cancelado",      9 ,"FECHADO",  now(), now());
"Executado com Sucesso",      9 ,"FECHADO",  now(), now());
"Nao Resolvido",      2 ,"ABERTO",  now(), now());
"Normalizado",      1 ,"FECHADO", now(), now());
"Resolvido",     9 ,"FECHADO", now(), now()); 
"Rollback",  0 ,"FECHADO", now(), now());


class Ci
  def method_missing(method_sym, *arguments, &block)
    # the first argument is a Symbol, so you need to_s it if you want to pattern match
    if method_sym.to_s =~ /^_([a-zA-Z]+)$/
      return getatributo($1)
    else
      super
    end
  end
end

class AddstatusIdtotasks < ActiveRecord::Migration
  def change
    add_column :tasks, :status_id, :integer
    execute <<-SQL
        update tasks set status_id = (select id from status_incidentes where tasks.status = status_incidentes.status);
    SQL
  end
end

class RemoveStatusTasks < ActiveRecord::Migration
  def change
    remove_column :tasks, :status, :string
  end
end


if "_aaaadsa" =~ /^_[a-zA-Z]+_$/ then
   puts "metodo: #{$1}"
end

if "_aaaadsa" =~ /^_(.*)_$/ then
   puts "metodo: #{$1}"
end

http://rhnh.net/2010/10/10/rails-3-ruby-1-9-2-windows-2008-and-sql-server-2008-tutorial


Rails.cache.fetch([:category, 10, :name], expires_in: 5.minutes) do
    "nome"
  end  


--- mandar email a partir do relatorio ----
recupero do memcached ou busco e coloco resultado no memcached 
ao clicar, metodo recupera dados do memcached (chave - relatorio/nomerelatorio/chave )
a chave Ã© sempre o primeiro campo do relatorio (ci, contrato, etc)
template (chave - relatorio/nomerelatorio - contrato/cobranca)



  select         
    	cis.chave as CI,        
    	cis.owner as Email,        
    	cis.descricao as Descricao,                
    	MAX(IF(atributos.dicdado_id = 16 , atributos.valor, NULL)) as CC          
    from         
        cis,         
        atributos,        
        sites,        
        tipocis  
     where         
        cis.tipoci_id=32 and                
        atributos.ci_id = cis.id and         
        cis.site_id = sites.id and         
        cis.tipoci_id = tipocis.id  
      group by  
        cis.chave 
      order by 
        cis.chave;


    select         
    	cis.chave as CI,        
    	cis.owner as Email,        
    	cis.descricao as Descricao,                
    	MAX(IF(atributos.dicdado_id = 16 , atributos.valor, NULL)) as CC ,
    	MAX(IF(atributos.dicdado_id = 26 , atributos.valor, NULL)) as SO          
    from         
        cis,         
        atributos,        
        sites,        
        tipocis  
     where         
        cis.tipoci_id=32 and                
        atributos.ci_id = cis.id and         
        cis.site_id = sites.id and         
        cis.tipoci_id = tipocis.id  
      group by  
        cis.chave 
      order by 
        cis.chave;