Urgente
[ ] - colocar .include em varios lugares
      view cis.show chama @cis.dependentes e esse fica navegando em tiposcis.
      tem que mudar do atributo .dependentes para um metodo da classe e essa pegar os dependentes com os tipocis. 
[ ] - colocar seguranca e autenticacao no AD
[ ] - colocar em producao
[ ] - colocar link nos contratos para fornecedor e texto puro
[ ] - area fornecedor
      (?? isso nao pode cair em conflito com area contrato ???)
      cadastro ta ok,
      falta: 
         [ ] - colocar campo no fornecedores
         [ ] - sphinx com area, nome, nome completo, contatos


[ ] - verificar se rafa usa seta <-- --> cima e baixo...(fica pesquisando no tabela)

[ ] - pedidos --> ELIMINAR - pode virar um checklist ou abertura no JIRA

[ ] - sphinx
      fornecedor (com area)
      o que mais ??

[ ] - colocar colchetes em volta de todos os links nas paginas de listagem e edicao

[ ] - eliminar lixos: chamados, tipo_chamados, sub_tipo_chamados, pedidos

[ ] - sites --> colcocar CNPJ, Endereco, etc, como esta no google docs

[ ] - fazer um scan com regex nos campos do JIRA para permitir espaco ponto virgula virgula, etc

[ ] - incluir por comando de linha (regex)
      rjsrvdb252 < servidor123,licenca > sitea, siteb
      servicoxyz:abc,xyz,aaa

[ ] - permitir incluir varios dependentes ou impactados separado por virgula ou ; (regex)

[ ] - refatorar views do ci, colocando helper, por exemplo, para URL
      tirar pancada de IF END

[ ] - gestao de celular e ramal no ItMgmt

[ ] - colocar na relacao dos dependentes e impactados, data da ultima mudanca, se foi a menos de 1 semana
  
[ ] - colocar atributos na criacao do CI (hoje tem que criar e editar)
      Tem q fazer ajax , pois nao se sabe o tipo antes...

[ ] - eliminar os descendentes diretos, e que nao tenham outros impactados
      lista todos os dependentes com checkbox, inclusive o atual, ja marcado.

[ ] - refatorar - helper para mostrar errors 
      ver exemplo do devise-omniauth-example --> helper->application helper

[ ] - quando muda de tipo, limpo atributos do CI, mas ele nao reflete na classe. Como limpar cache

[ ] - foco no campo de inserir dependente, impactado, search

[ ] - refatorar de inserir dependente/impactado - tenho htmls identicos

[ ] - colocar validate presence of em tudo quanto é lugar

[ ] - verificar se estou usando muito <%= no lugar erro (ex de javascript do curso RR75
 
[ ] - campo obs.. (pode ser via javascript, abrindo e fechando p nao ocupar espaco..)

[ ] - rails generate observer ao inves de cache no controller CIS.

[ ] - alterar generate/scaffold para prever
      [ ] campo tipo URL
      [ ] formato de formulario
 

[ ] - checklist
      - itensChecklist
      - Checklist
      - ExecChecklist
      URL do CI para Checklist
     
[ ] - ChgMgmt
      - CI
          CIs impactados
      - Checklist
      [ ] - pegar doc do fabio/rafa
      - doc google mudanca
      - 

[ ] - fornecedor com telefone de abertura
      link: ter campo fornecedor, CPNJ do link, cliente, endereco de instalacao, data ativacao, data renovacao, prazo, data ativacao, abordagem da localidade, tecnologia do link, (multa estimada)
      :gerar relatorio para isso, com xml, url:consumo historico, url:consumo atual
      ==> nao se faco generico no CIS ou uma tabela especifica para links...!?!?!?!?!?!/

[ ] - Pendencias: tipo (para facilitar search, cliente (polimorfico? para nao ter que digitar aqui e na URL),
      acao: transformar em CI. (com associacao de atributos pelo mesmo nome)
    

[ ] - deletar tabelas auxiliares.
      [ ] - so apagar se nao tiver filho
      [ ] - so adm pode apagar
      [ ] - devolver destroy para view se for administrador
 
[ ] -tirar logica de controller e view e colocar no model
     
[ ] - ver se é melhor ter ci--> contrato atraves de url (%S) ou injetar algo polimorfico nas duas classes
      com url, eu so consigo chegar atraves de browser ou colocando hardcoded (if campo = contrato)
      posso tentar injetar algo polimorfico 
      ci.contrato ==> 
      ele pode ate procurar se tem atributo contrato.


[ ] - concatenacao de string atraves de [...].compact.join(' ')

[ ] - linkar contratos - cis
[ ] - format contratos

[ ] - email de impacto para gestao de mudanca
      somente para owner...
      pode enviar email ou gerar lista de email para copy & paste no email.
      pode gerar dados...to,cc, itens para o corpo do email      


[ ]- helper 
    [ ] email cobranca - codigo repetido..
	  [ ] - corpo do email de cobranca num helper dp model de contrato e nao no controller. Controller nao tem q saber montar corpo. so email a partir do body,cc,to
	
[ ] - pode ter um erro ao adicionar no do grafico.
      1) eu so teste data de mudanca num ponto. no outro, adiciono sem testarx 
	  2) eu adiciono cada node 2x. uma como o dependente/impactado. outra depois de tirar da fila..
	      se ele nao duplica, ta mascarado.
[ ]	- passar logica de navegacao p fora do controler, talvez dentro do model.
	

[ ] - paginando ou limitando resultado do search 
      railscast 240

[ ] - montar lista de usuarios a partir do AD (carga eventual, sempre incremental)

[ ] - adicionar owner do tipo (pode ser um grupo de email)

[ ] - regex para owner nao esta ok.

[ ] - colocar tamanho dos CIs

[ ]- relatorios especificos - exemplo: licencas.. filtro por campos especificos - data de renovacao

[ ] - eliminar um CI e suas relacoes

[ ] - procurar por aquele include q evita ir no sql. ta indo sempre, principalmente com listagem.

[ ] - colocar os validates no CI para ter chave, descricao e tipo
[ ] - cadastro de CI
      [ ] - colocar um listbox na tela de navegacao - primeiro escolhe o tipo e depois criar
      [ ] - colocar opcao (dependente do CI sendo mostrado ou impactado pelo CI sendo mostrado ou novo)

[ ] - visoes especificas - servidores, links, licensas
      
[ ] - trocar as variaveis por variaveis de instancia @

[ ] - oldCI ta atrapalhando..quando dou um criar da listagem, o oldCI esta com valor antigo...
      se eu limpar no index, o new se perde ao dar o find.

[ ] - formatar tela do CMDB
      [ ] colocar a referencia correta do stylesheets

[ ] - trocar o uniqueness da chave por uma Indice no database e ver se da erro ao salvar, e nao
      usar o case_insensitive do validate.

[ ] - testar bem OldCI no NEW - acho que numa vez, navegando pelos impactados, ele mostrou o errado..

[ ] - codigo poluido. teste muito coisa nil. Ex: mesmo form para new e edit. Em NEW, tem oldci. Em EDIT, nao.

[ ] - limpeza de codigo
      http://simplesideias.com.br/usando-presenters-no-rails
	  http://simplesideias.com.br/usando-responders-no-rails
      acabar com div ou refazer.

[ ] - profundidade dos dependentes/impactados no grafico (ta fixo em 4)
       colocar como parametro.

[ ] - colocar configurações para gerar owner no grafico, ou qq outro atributo etc.
      [ ] - configuração para forma do grafico diferente (ex: se tiver clientes, colocar dupla bolota)
      [ ] - caminho critico em vermelho (podendo ter alteração)
      [ ] - marcar em vermelho data da ultima alteracao.

[ ] - alterar layout do _form_ci, que mostra
      (ou tela normal, ou layout de caixinha, sem poder editar)

[ ]- http://stackoverflow.com/questions/3056416/rails-activerecord-caching-all-registers-of-a-model
     https://gist.github.com/72250/

[ ]- agenda de pendencias, baseado numa data - ex: cobrar desligamento de servidor
     workflow ? 

[ ] - pedidos - fazer com ajax puro, mostrando detalhes.	
      expiracao. alertas. 

[ ] - passar rotinas de dependentes p dentro do model


[ ] - colocar limite para mostrar dataultimamudanca como parametro 

[ ] - melhorar ajax
      http://blog.madebydna.com/all/code/2011/12/05/ajax-in-rails-3.html

[ ] - CRIAR INDEXES p todas tabelas.
      (verificar todos os order by e where dos scopes)
[ ] - trocar Anterior e Proximo por acao de um Ci e nao url, para evitar ter q ir no bd descobrir ant e prox

[ ] -  rdoc do cis_controller, ci, etc

==================================
A fazer.

Tamanho do texto (do campo e permitido para digitar, nao ficar hardcoded no _form.html.erb e sim pegar do modelo.

--> SLA (enviar email para proprietario quando colocar a data de fim e quando abrir)
    pesquisar num item de Cfg mgmt
--> CI e cfg mgmt



--> procurar https://github.com/insoshi/ para ver como altera a aba
--> colocar Area (Telefonia, LINK, Email, Conexao com cliente, etc)
--> alterar as abas ativas/nao_ativas...pegar do livro antigo de rails do michael hart

--> ajustar console para fazer refresh via ajax, sem reload da pagina


==Pedidos em suspenso=============POR QUE NAO JIRA ????????============
1) Data da proxima alteração de status - pede dias, e atualiza a data automaticamente
2) log dos emails enviados com status para acompanhar no pedido.
3) log de mudanca de status no pedido
4) sempre copiar gestão da demanda e gestaoTI
------------------------------------------------------------





<% [:info, :error].each do |key| %>
   <% if flash[key] %>
   <div class="<%= key %>" id="flash">
     <%= flash[key] %>
   </div>
   <% end %>
 <% end %>

http://stackoverflow.com/questions/4633354/how-can-i-make-the-javascript-in-my-rails-3-form-unobtrusive
https://github.com/ereslibre/realtime-validations/wiki/How-it-works

http://www.headfirstlabs.com/books/hfajax/ch02.php

================================================================================
= 
= DESENHO FINAL
= 
= 
= CMDB
= Alertas - (SOBRE UM CI) - Possivelmente abrindo um item no noc (ou vice versa)
= Contratos (servicoext) com cobrança via email, itens nao cobrados.. 
= NOC - SLA (SOBRE UM CI)
= controle de link (integrado como servicoext contratos..) (polimorfico ou um search?relatorio dos ci ?)
= gestao de pedidos - jira?? , transformar em CI, cliente, tipo,
= checklist --> gerar JIRA para cada item
= gestao de mudanca -->
=
= relatorios especificos: licencas, servidores, etc
=
=
= Gestao de eventos: (trigger)
= Ao criar CI Servidor ---> checklist, workflow, etc. (atraves do observer?? include Eventable?? )
=    
= 
= Cadastro de eventos (outro tipo): Desligar Vila Olimpia. Evento: (checklist, executor, data)
=    qual a diferenca de evento para chg mgmt
=    dois tipos de change num CI - mudanca e desligar/religar..
=
================================================================================



*********************************************************************************************
*
*  polimorfismo com CI
*
*  Se tiver um evento ou mudanca ou checklist com algum item relacionado para CI, mostrar, com ajax abrindo e fechando
*  se tiver qq item q relaciona a CI, mostrar. E nao ficar o cis controller pesquisando.
*     cada um diz se tem e se mostra no html. 
*     se eu criar qq coisa, nao preciso alterar o CIS Controller (pre req forte: HTML e AJAX)
*
*
*
*
*********************************************************************************************

rails generate scaffold Contratos codcontrato:string descricao:string datainicio: 




relatorio de integridades
--> cis:servicoext sem contrato



links:
codigo chave
cliente campo2
capacidade campo3
--> contrato:campo1 (operadora, valor, renovacao, etc)
dados do link:
   endereco,designacao,etc..	


id_ci, id_campo, valor

id_campo, nome_campo, tipo_ci


https://mail.google.com/mail/u/1/?shva=1#compose

<a href="mailto:enter-friend@address-here.com?subject=My Website&amp;body=This e-mail has been sent to inform you about my website website: www.mywebsite.com">Send an email to a friend</a>

controller email
   email/acao/registro
   ex: email/cobrancacontrato/23





   10157
curl -D- -u magno:nc1702 -X POST -d '{"fields": {"project":{ "id": "10157"},"summary": "No REST for the Wicked.","description": "Creating of an issue using ids for projects and issue types using the REST API","reporter" :"magno","issuetype": {"name": "Tarefa"}}}'- -H "Content-Type: application/json" http://jira.brq.com:8090/rest/api/2/issue/

curl -D- -u magno:nc1702 -X POST --data {
    "fields": {
       "project":
       { 
          "id": "10157"
       },
       "summary": "No REST for the Wicked.",
       "description": "Creating of an issue using ids for projects and issue types using the REST API",
       "reporter" : "magno",
       "issuetype": {
          "name": "Tarefa"
       }
   }
}
 -H "Content-Type: application/json" http://jira.brq.com:8090/rest/api/2/issue/


{
    "fields": {
       "project":
       { 
          "id": "10157"
       },
       "summary": "No REST for the Wicked.",
       "description": "Creating of an issue using ids for projects and issue types using the REST API",
       "reporter" : "magno",
       "issuetype": {
          "name": "Tarefa"
       }
   }
}


1.9.2-p180 :020 > c.dependentes[0]
1.9.2-p180 :021 > c.relacao_dependencia[0].dependente
Posso implementar os metodos
dep[i]==> relacao_dependencia[i].dependente
imp
e_composto_de[1] ==> igual ao dep, porem filtrando por somente é composto de
